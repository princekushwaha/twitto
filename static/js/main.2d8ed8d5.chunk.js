(this.webpackJsonpreactpost=this.webpackJsonpreactpost||[]).push([[0],{15:function(e,t,a){},19:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){e.exports=a(71)},42:function(e,t,a){},43:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},44:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(22),i=a.n(r),l=(a(42),a(43),a(44),a(17)),o=a(5),c=a(1),m=a(2),u=a(4),d=a(3),p=(a(19),a(8)),f=a.n(p),h="https://aqueous-temple-87066.herokuapp.com",g=function(){return null!==localStorage.getItem("auth-token")},b=function(){return localStorage.getItem("auth-token")},v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loggedin:!1,username:"",password:"",username_error:"",password_error:"",global_error:"",submit_disabled:"True",isLoading:!1},n.isLoading=function(){return n.state.isLoading?s.a.createElement("div",{class:"spinner-border text-primary",role:"status"},s.a.createElement("span",{class:"sr-only"},"Loading...")):"Login"},n.listen_input=function(e){"username"===e.target.id?(n.setState({username:e.target.value}),n.enable_or_disable_submit(e.target.value,n.state.password)):"password"===e.target.id&&(n.setState({password:e.target.value}),n.enable_or_disable_submit(e.target.value,n.state.username))},n.enable_or_disable_submit=function(e,t){""===e||""===t?n.setState({submit_disabled:"True"}):n.setState({submit_disabled:""})},n.handle_login=function(e){e.preventDefault(),n.setState({isLoading:!0});var t={username:n.state.username,password:n.state.password};f.a.post(h+"/account/login/",t,{headers:{}}).then((function(e){var t,a=e.data;t=a.key,localStorage.setItem("auth-token",t),n.setState({isLoading:!1,loggedin:!0})})).catch((function(e){e.response?400===e.response.status&&n.setState({global_error:e.response.data.non_field_errors}):window.alert(e.message),n.setState({isLoading:!1})}))},n.state.loggedin=g(),n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.loggedin?(window.location.href="/",s.a.createElement("div",null)):s.a.createElement("div",{className:"d-flex justify-content-center align-items-center full-window-size"},s.a.createElement("div",{className:"",onSubmit:this.handle_login},s.a.createElement("fieldset",{className:"d-flex flex-column"},s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement("img",{src:"img/twitter.svg",alt:"Twitter",className:"form-brand-icon"})),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.global_error),s.a.createElement("input",{type:"text",name:"username",id:"username",className:"input mt-2 border-bottom",placeholder:"Username",onChange:this.listen_input,required:!0}),s.a.createElement("input",{type:"password",name:"password",id:"password",className:"input mt-2 border-bottom",placeholder:"Password",onChange:this.listen_input,required:!0}),s.a.createElement("button",{className:"mt-3 input bg-brand-color",onClick:this.handle_login,disabled:this.state.submit_disabled},this.isLoading()),s.a.createElement("div",{className:"d-flex justify-content-center mt-3"},s.a.createElement("a",{className:"brand-color",href:"/signup "},"Not a User? Signup Now")))))}}]),a}(n.Component),E=a(6),w=a.n(E),k=a(10),_=a(36),N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loggedin:!1,credentials:{username:"",email:"",password1:"",password2:""},errors:{username:"",email:"",password1:"",password2:""},global_error:"",submit_disabled:"True",isLoading:!1},n.isLoading=function(){return n.state.isLoading?s.a.createElement("div",{className:"spinner-border text-primary",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")):"SIGNUP"},n.listen_input=function(e){var t=Object(_.a)({},n.state.credentials);t[e.target.id]=e.target.value,n.setState({credentials:t}),n.enable_or_disable_submit(e.target.id,e.target.value)},n.enable_or_disable_submit=function(e,t){var a="";""===t&&(a="True"),Object.keys(n.state.credentials).map((function(t,s){t===e||""!==n.state.credentials[t]||(a="True")})),n.setState({submit_disabled:a})},n.handle_signup=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),a={username:n.state.credentials.username,email:n.state.credentials.email,password1:n.state.credentials.password1,password2:n.state.credentials.password2},s={},e.next=6,f.a.post(h+"/account/",a,{headers:s}).then((function(e){e.data;window.alert("Verification Email sent to "+n.state.credentials.email),n.setState({isLoading:!1,loggedin:!0})})).catch((function(e){if(e.response&&400===e.response.status){var t={};Object.keys(e.response.data).map((function(e,a){"username"===e?t[e]="Username Already Exists":"email"===e?t[e]="Email Already Registered Or Invalid":"password1"===e?t[e]="Must not be too Common":"non_field_errors"===e&&(t.password2="Password Must Match")})),n.setState({errors:t})}else window.alert(e.message);n.setState({isLoading:!1})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state.loggedin=g(),n}return Object(m.a)(a,[{key:"render",value:function(){if(!this.state.loggedin)return s.a.createElement("div",{className:"d-flex justify-content-center align-items-center full-window-size"},s.a.createElement("div",{className:"",onSubmit:this.handle_login},s.a.createElement("fieldset",{className:"d-flex flex-column"},s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement("img",{src:"img/twitter.svg",alt:"Twitter",className:"form-brand-icon"})),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.global_error),s.a.createElement("input",{type:"text",name:"username",id:"username",className:"input mt-2 border-bottom",placeholder:"Username",onChange:this.listen_input,required:!0,autoFocus:!0}),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.errors.username),s.a.createElement("input",{type:"email",name:"email",id:"email",className:"input mt-2 border-bottom",placeholder:"Email",onChange:this.listen_input,required:!0}),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.errors.email),s.a.createElement("input",{type:"password",name:"password1",id:"password1",className:"input mt-2 border-bottom",placeholder:"Password(atleast 8 characters)",onChange:this.listen_input,required:!0}),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.errors.password1),s.a.createElement("input",{type:"password",name:"password2",id:"password2",className:"input mt-2 border-bottom",placeholder:"Confirm Password",onChange:this.listen_input,required:!0}),s.a.createElement("div",{className:"d-flex justify-content-center mt-3 text-danger"},this.state.errors.password2),s.a.createElement("button",{className:"mt-3 input bg-brand-color",onClick:this.handle_signup,disabled:this.state.submit_disabled},this.isLoading()),s.a.createElement("div",{className:"d-flex justify-content-center mt-3"},s.a.createElement("a",{className:"brand-color",href:"/login"},"Already a user? Login now")))));window.location.href="/"}}]),a}(n.Component),y=(a(34),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={active:"home"},n.isActive=function(e){if(e===n.state.active)return"active"},n.handle_logout=function(e){window.confirm("Do you want to log out ? ")&&(localStorage.removeItem("auth-token"),window.location.href="/login")},n.item_className="sidebar-link d-flex justify-content-center",n.state.active=e.active,n}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("aside",{className:"d-flex flex-column sidebar border-right border-line"},s.a.createElement("ul",{className:"d-flex flex-column pr-5 align-items-center"},s.a.createElement("a",{href:"/",className:"pt-5 d-flex justify-content-center",title:"twitter"},s.a.createElement("img",{src:"img/twitter.svg",alt:"Twitter",className:"sidebar-brand-icon"})),s.a.createElement("a",{href:"/",className:this.item_className+" "+this.isActive("home"),title:"home"},s.a.createElement("img",{src:"img/home.svg",alt:"",className:"sidebar-image"})," ",s.a.createElement("span",{className:"sidebar-item-label"},"Home")),s.a.createElement("a",{href:"/profile",className:this.item_className+" "+this.isActive("profile"),title:"profile"},s.a.createElement("img",{src:"img/user.svg",alt:"",className:"sidebar-image"}),s.a.createElement("span",{className:"sidebar-item-label"},"Profile")),s.a.createElement("a",{href:"/myposts",className:this.item_className+" "+this.isActive("my_posts")},s.a.createElement("img",{src:"img/poster.svg",alt:"",className:"sidebar-image"}),s.a.createElement("span",{className:"sidebar-item-label"},"My Posts")),s.a.createElement("a",{href:"/tweet",className:"sidebar-link sidebar-button d-flex justify-content-center",title:"my posts"},s.a.createElement("img",{src:"img/write.svg",alt:"",className:"sidebar-image"}),s.a.createElement("span",{className:"sidebar-item-label"},"Tweet")),s.a.createElement("button",{className:"sidebar-link sidebar-button d-flex justify-content-center",title:"logout",onClick:this.handle_logout},s.a.createElement("img",{src:"img/logout.svg",alt:"logout",className:"sidebar-image"}),s.a.createElement("span",{className:"sidebar-item-label"},"Logout"))))}}]),a}(n.Component)),x=(a(15),a(16)),j=(a(63),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={total_likes:null,liked:null},n.get_time=function(){var e=n.props.post.uploaded_on,t=new Date(e);return"".concat(t.getDate(),"-").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][t.getMonth()],"-").concat(t.getFullYear())},n.handle_likes=function(e){"False"===n.state.liked?n.like("Like"):n.like("Unlike")},n.like=function(e){var t=n.props.post.like_url,a={Authorization:"Token "+b()};"Like"===e?(f.a.post(t,null,{headers:a}).then((function(e){})).catch((function(e){})),n.setState({liked:"True",total_likes:n.state.total_likes+1})):(f.a.delete(t,{headers:a}).then((function(e){})).catch((function(e){})),n.setState({liked:"False",total_likes:n.state.total_likes-1}))},n.getImg=function(){return"True"===n.state.liked?"img/heart-red.svg":"img/heart.svg"},n.update_likes=Object(k.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h+"/post/"+n.props.post.id,a={Authorization:"Token "+b()},e.next=4,f.a.get(t,{headers:a}).then((function(e){n.setState({total_likes:e.data.total_likes})})).catch((function(e){}));case 4:window.setInterval(n.update_likes,1e4);case 5:case"end":return e.stop()}}),e)}))),n.state.total_likes=e.post.total_likes,n.state.liked=e.post.liked,n}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"d-flex flex-column  mt-2"},s.a.createElement("div",{className:"d-flex pl-2"},s.a.createElement("img",{src:"img/hacker.png",alt:"user",className:"post-profile-icon"}),s.a.createElement("div",{className:"d-flex flex-row align-items-center"},s.a.createElement("a",{href:this.props.post.author_username,className:"post-author-link"},s.a.createElement("span",{className:"post-author-name"},this.props.post.author_username)),s.a.createElement("span",{className:"post-time text-muted"},this.get_time()))),s.a.createElement("div",{className:"d-flex m-2"},this.props.post.body),this.props.post.image&&s.a.createElement("div",{className:"d-flex image-responsive"},s.a.createElement("img",{src:this.props.post.image,alt:"",className:"post-image flex-grow-1 m-2"})),s.a.createElement("div",{className:"d-flex flex-row justify-content-center border-bottom border-line mt-2"},s.a.createElement("button",Object(x.a)({onClick:this.handle_likes,className:"like-btn"},"onClick",this.handle_likes),s.a.createElement("div",{className:"d-flex flex-row align-items-center"},s.a.createElement("span",{className:"text-muted"},this.state.total_likes),s.a.createElement("img",{alt:"like",src:this.getImg(),className:"ml-3 like-img"})))))}}]),a}(n.Component)),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isActive:!0},n}return Object(m.a)(a,[{key:"render",value:function(){return this.props.isActive?s.a.createElement("div",{className:"pt-5"},s.a.createElement("div",{className:"spinner-border text-primary",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))):s.a.createElement(s.a.Fragment,null)}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={posts:[],isLoading:!0},e.fetchPosts=Object(k.a)(w.a.mark((function t(){var a,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h+"/post/?ordering=-uploaded_on",n={Authorization:"Token "+b()},t.next=4,f.a.get(a,{headers:n}).then((function(t){e.setState({posts:t.data})})).catch((function(e){}));case 4:e.setState({isLoading:!1});case 5:case"end":return t.stop()}}),t)}))),e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(O,{isActive:this.state.isLoading})),this.state.posts.map((function(e){return s.a.createElement(j,{post:e,key:e.image})})))}},{key:"componentDidMount",value:function(){this.fetchPosts()}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={btn_disabled:"True",body:"",image:null},e.listen_change=function(t){"body"===t.target.name?(e.setState({body:t.target.value}),t.target.value.length>0?e.setState({btn_disabled:""}):""===e.state.btn_disabled&&e.setState({btn_disabled:"True"})):"image"===t.target.name&&e.setState({image:t.target.files[0]})},e.handle_upload=function(){var t=Object(k.a)(w.a.mark((function t(a){var n,s,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h+"/post/",s={Authorization:"Token "+b()},(r=new FormData).append("body",e.state.body),null!==e.state.image&&r.append("image",e.state.image),t.next=7,f.a.post(n,r,{headers:s}).then((function(e){window.location.href="/"})).catch((function(e){}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"d-flex main"},s.a.createElement("div",{action:"",className:"d-flex flex-column m-3 flex-grows-1 tweet-form"},s.a.createElement("textarea",{type:"text",name:"body",className:"tweet-text-area pt-3 pl-3",placeholder:"What's Happening",onChange:this.listen_change,autoFocus:!0}),s.a.createElement("input",{type:"file",name:"image",id:"image",className:"tweet-image-upload mt-5",accept:"image/*",onChange:this.listen_change}),s.a.createElement("button",Object(x.a)({onClick:this.handle_upload,className:"mt-5 bg-brand-color p-2 rounded-pill",disabled:this.state.btn_disabled},"onClick",this.handle_upload),"Tweet")))}}]),a}(n.Component),A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={detail:{},isLoading:!0},e.get_joined_time=function(){var t=e.state.detail.date_joined,a=new Date(t);return"".concat(a.getDate(),"-").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][a.getMonth()],"-").concat(a.getFullYear())},e.fetchUserDetails=Object(k.a)(w.a.mark((function t(){var a,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h+"/account/user/",n={Authorization:"Token "+b()},t.next=4,f.a.get(a,{headers:n}).then((function(t){e.setState({detail:t.data,isLoading:!1})})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)}))),e}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.fetchUserDetails()}},{key:"render",value:function(){return s.a.createElement("div",{className:"main d-flex flex-column align-items-center mt-4 border-bottom pb-3"},s.a.createElement(O,{isActive:this.state.isLoading}),!this.state.isLoading&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:"img/hacker.png",alt:"profile_pic",className:"profile-avatar-image rounded-circle border border-black"}),s.a.createElement("span",{className:"post-author-name mt-2"},this.state.detail.first_name),s.a.createElement("span",{className:"text-muted post-time"},"@",this.state.detail.username),s.a.createElement("div",{className:"mt-2"},s.a.createElement("span",null,s.a.createElement("img",{src:"img/calendar.svg",alt:"",className:"profile-joined-icon ml-2 "})),s.a.createElement("span",{className:"ml-2 text-muted"},this.get_joined_time()))))}},{key:"componentDidMount",value:function(){}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"main border-bottom border-black"},s.a.createElement("label",{className:"header-title pt-2 pb-1 pl-3 "},this.props.title))}}]),a}(n.Component),T=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={posts:[],username:null,isLoading:!0},e.fetchPosts=Object(k.a)(w.a.mark((function t(){var a,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUserDetails();case 2:return a=h+"/post/?search="+e.state.username,n={Authorization:"Token "+b()},t.next=6,f.a.get(a,{headers:n}).then((function(t){e.setState({posts:t.data})})).catch((function(e){}));case 6:e.setState({isLoading:!1});case 7:case"end":return t.stop()}}),t)}))),e.fetchUserDetails=Object(k.a)(w.a.mark((function t(){var a,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h+"/account/user/",n={Authorization:"Token "+b()},t.next=4,f.a.get(a,{headers:n}).then((function(t){e.setState({username:t.data.username})})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)}))),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(O,{isActive:this.state.isLoading})),this.state.posts.map((function(e){return s.a.createElement(j,{post:e,key:e.id})})))}}]),a}(n.Component),D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={is_loggedin:!1},n.state.is_loggedin=g(),n}return Object(m.a)(a,[{key:"render",value:function(){return 0==this.state.is_loggedin?(window.location.href="/login",s.a.createElement(s.a.Fragment,null)):s.a.createElement(l.a,null,s.a.createElement(o.c,null,s.a.createElement(o.a,{path:"/",exact:!0},s.a.createElement(y,{active:"home"}),s.a.createElement(C,{title:"Home"}),s.a.createElement(S,null)),s.a.createElement(o.a,{path:"/profile",exact:!0},s.a.createElement(y,{active:"profile"}),s.a.createElement(C,{title:"Profile"}),s.a.createElement(A,null)),s.a.createElement(o.a,{path:"/tweet",exact:!0},s.a.createElement(y,{active:""}),s.a.createElement(C,{title:"Tweet"}),s.a.createElement(L,null)),s.a.createElement(o.a,{path:"/myposts",exact:!0},s.a.createElement(y,{active:"my_posts"}),s.a.createElement(C,{title:"My Posts"}),s.a.createElement(T,null))))}},{key:"componentDidMount",value:function(){}}]),a}(n.Component);var M=function(){return s.a.createElement(l.a,null,s.a.createElement(o.c,null,s.a.createElement(o.a,{path:"/login"},s.a.createElement(v,null)),s.a.createElement(o.a,{path:"/signup"},s.a.createElement(N,null)),s.a.createElement(o.a,{path:"/"},s.a.createElement(D,null))))},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/twitto",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/twitto","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):U(t,e)}))}}()}},[[38,1,2]]]);
//# sourceMappingURL=main.2d8ed8d5.chunk.js.map